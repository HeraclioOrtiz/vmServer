# CRUD Implementation Guide - Panel de Administraci√≥n

## üéØ **Visi√≥n General**

Esta gu√≠a proporciona instrucciones detalladas para implementar todos los CRUDs necesarios en el frontend del panel de administraci√≥n Villa Mitre. Incluye tanto el **Panel de Gimnasio** (profesores) como el **Panel Villa Mitre** (administradores).

## üìã **CRUDs Requeridos**

### **Panel de Gimnasio (Profesores)**
1. **Ejercicios** - CRUD completo con filtros avanzados
2. **Plantillas Diarias** - CRUD con wizard de creaci√≥n
3. **Plantillas Semanales** - CRUD con calendario visual
4. **Asignaciones Semanales** - CRUD con proceso guiado
5. **Estudiantes Asignados** - Vista y gesti√≥n

### **Panel Villa Mitre (Administradores)**
1. **Usuarios** - CRUD completo con roles y permisos
2. **Profesores** - Gesti√≥n especializada con estad√≠sticas
3. **Configuraci√≥n del Sistema** - Formularios de configuraci√≥n
4. **Reportes** - Vistas de solo lectura con filtros
5. **Logs de Auditor√≠a** - Vista de solo lectura con b√∫squeda

## üèãÔ∏è **Panel de Gimnasio - CRUDs**

### **1. CRUD de Ejercicios**

#### **Lista de Ejercicios (`/gym/exercises`)**
**Funcionalidades requeridas:**
- ‚úÖ **Tabla paginada** (20 elementos por p√°gina)
- ‚úÖ **B√∫squeda en tiempo real** por nombre
- ‚úÖ **Filtros m√∫ltiples**: grupo muscular, equipo, dificultad, tags
- ‚úÖ **Ordenamiento** por nombre, fecha creaci√≥n, popularidad
- ‚úÖ **Acciones por fila**: Ver, Editar, Duplicar, Eliminar
- ‚úÖ **Acciones masivas**: Eliminar seleccionados, Exportar
- ‚úÖ **Vista previa r√°pida** en modal

**Componentes UI necesarios:**
- `ExerciseTable` - Tabla principal con paginaci√≥n
- `ExerciseFilters` - Panel de filtros colapsable
- `ExercisePreviewModal` - Modal de vista previa
- `BulkActionsBar` - Barra de acciones masivas

**Estados de datos:**
- Loading: Skeleton de tabla
- Empty: Ilustraci√≥n + bot√≥n "Crear primer ejercicio"
- Error: Toast notification + retry button

#### **Crear/Editar Ejercicio (`/gym/exercises/new`, `/gym/exercises/:id/edit`)**
**Formulario requerido:**
- ‚úÖ **Informaci√≥n b√°sica**: nombre, descripci√≥n, instrucciones
- ‚úÖ **Categorizaci√≥n**: grupo muscular, patr√≥n de movimiento, equipo
- ‚úÖ **Configuraci√≥n**: dificultad, tempo, tags
- ‚úÖ **Multimedia**: URL de video, URL de imagen
- ‚úÖ **Validaci√≥n en tiempo real** con Zod
- ‚úÖ **Preview en vivo** del ejercicio

**Componentes UI necesarios:**
- `ExerciseForm` - Formulario principal
- `TagSelector` - Selector de tags con autocompletado
- `MediaUploader` - Subida de im√°genes/videos
- `ExercisePreview` - Vista previa en tiempo real

### **2. CRUD de Plantillas Diarias**

#### **Lista de Plantillas (`/gym/daily-templates`)**
**Funcionalidades requeridas:**
- ‚úÖ **Vista de tarjetas** con informaci√≥n clave
- ‚úÖ **Filtros**: objetivo, duraci√≥n, nivel, creador
- ‚úÖ **B√∫squeda** por t√≠tulo y descripci√≥n
- ‚úÖ **Indicadores visuales**: prefijada vs personalizada
- ‚úÖ **Acciones**: Ver, Editar, Duplicar, Usar, Eliminar
- ‚úÖ **Vista previa** de ejercicios en modal

**Componentes UI necesarios:**
- `TemplateGrid` - Grid de tarjetas responsivo
- `TemplateCard` - Tarjeta individual con acciones
- `TemplatePreviewModal` - Modal con lista de ejercicios
- `TemplateFilters` - Filtros en sidebar

#### **Crear/Editar Plantilla Diaria (Wizard)**
**Paso 1: Informaci√≥n General**
- ‚úÖ **Datos b√°sicos**: t√≠tulo, objetivo, duraci√≥n, nivel
- ‚úÖ **Configuraci√≥n**: tags, descripci√≥n, notas
- ‚úÖ **Validaci√≥n**: campos requeridos, l√≠mites

**Paso 2: Selecci√≥n de Ejercicios**
- ‚úÖ **Buscador de ejercicios** con filtros
- ‚úÖ **Drag & drop** para agregar/reordenar
- ‚úÖ **Vista previa** de ejercicios seleccionados
- ‚úÖ **Configuraci√≥n por ejercicio**: notas, descanso

**Paso 3: Configuraci√≥n de Series**
- ‚úÖ **Editor de series** por ejercicio
- ‚úÖ **Plantillas de series** (3x10, 5x5, etc.)
- ‚úÖ **Configuraci√≥n avanzada**: RPE, tempo, notas
- ‚úÖ **Vista previa final** de la plantilla

**Componentes UI necesarios:**
- `TemplateWizard` - Contenedor del wizard
- `ExerciseSelector` - Selector con drag & drop
- `SetEditor` - Editor de series por ejercicio
- `TemplatePreview` - Vista previa final

### **3. CRUD de Plantillas Semanales**

#### **Lista de Plantillas Semanales (`/gym/weekly-templates`)**
**Funcionalidades requeridas:**
- ‚úÖ **Vista de calendario** por plantilla
- ‚úÖ **Filtros**: split, d√≠as por semana, creador
- ‚úÖ **Informaci√≥n resumida**: d√≠as activos, plantillas usadas
- ‚úÖ **Acciones**: Ver, Editar, Duplicar, Usar, Eliminar

#### **Crear/Editar Plantilla Semanal**
**Funcionalidades requeridas:**
- ‚úÖ **Informaci√≥n b√°sica**: t√≠tulo, tipo de split, descripci√≥n
- ‚úÖ **Calendario interactivo** de 7 d√≠as
- ‚úÖ **Asignaci√≥n de plantillas diarias** por d√≠a
- ‚úÖ **Drag & drop** entre d√≠as
- ‚úÖ **Configuraci√≥n de d√≠as de descanso**
- ‚úÖ **Vista previa** de la semana completa

**Componentes UI necesarios:**
- `WeeklyTemplateBuilder` - Constructor principal
- `WeekCalendar` - Calendario interactivo
- `DaySlot` - Slot para cada d√≠a de la semana
- `DailyTemplateSelector` - Selector de plantillas diarias

### **4. CRUD de Asignaciones Semanales**

#### **Lista de Asignaciones (`/gym/assignments`)**
**Funcionalidades requeridas:**
- ‚úÖ **Tabla con informaci√≥n del estudiante**
- ‚úÖ **Filtros**: estudiante, fecha, estado, adherencia
- ‚úÖ **Indicadores visuales**: adherencia, progreso
- ‚úÖ **Acciones**: Ver, Editar, Duplicar, Cancelar
- ‚úÖ **Vista de calendario** opcional

#### **Crear Nueva Asignaci√≥n (Wizard)**
**Paso 1: Seleccionar Estudiante**
- ‚úÖ **Buscador de estudiantes** con filtros
- ‚úÖ **Informaci√≥n del estudiante**: historial, estad√≠sticas
- ‚úÖ **Verificaci√≥n de conflictos** con asignaciones existentes

**Paso 2: Configurar Fechas**
- ‚úÖ **Selector de semana** con calendario
- ‚úÖ **Detecci√≥n de conflictos** autom√°tica
- ‚úÖ **Sugerencias** de semanas disponibles

**Paso 3: Elegir M√©todo de Asignaci√≥n**
- ‚úÖ **Desde plantilla semanal** - Selector de plantillas
- ‚úÖ **Manual** - Asignaci√≥n d√≠a por d√≠a
- ‚úÖ **Asistente IA** - Generaci√≥n autom√°tica

**Paso 4: Revisi√≥n y Personalizaci√≥n**
- ‚úÖ **Vista previa** de la asignaci√≥n completa
- ‚úÖ **Edici√≥n inline** de ejercicios/series
- ‚úÖ **Notas personalizadas** por d√≠a
- ‚úÖ **Confirmaci√≥n final**

## üèõÔ∏è **Panel Villa Mitre - CRUDs**

### **1. CRUD de Usuarios**

#### **Lista de Usuarios (`/admin/users`)**
**Funcionalidades requeridas:**
- ‚úÖ **Tabla avanzada** con informaci√≥n completa
- ‚úÖ **B√∫squeda global**: nombre, DNI, email
- ‚úÖ **Filtros m√∫ltiples**: tipo, rol, estado, fecha
- ‚úÖ **Ordenamiento** por m√∫ltiples columnas
- ‚úÖ **Acciones**: Ver perfil, Editar, Cambiar rol, Suspender
- ‚úÖ **Acciones masivas**: Exportar, Cambiar estado
- ‚úÖ **Estad√≠sticas resumidas** en header

**Componentes UI necesarios:**
- `UserTable` - Tabla principal con todas las funcionalidades
- `UserFilters` - Panel de filtros avanzados
- `UserStatsHeader` - Estad√≠sticas resumidas
- `BulkUserActions` - Acciones masivas

#### **Detalle de Usuario (`/admin/users/:id`)**
**Secciones requeridas:**
- ‚úÖ **Informaci√≥n b√°sica**: datos personales, avatar
- ‚úÖ **Informaci√≥n del club**: socio, estado, sem√°foro
- ‚úÖ **Roles del sistema**: profesor, admin, permisos
- ‚úÖ **Actividad del gimnasio**: plantillas, asignaciones
- ‚úÖ **Log de actividad**: logins, acciones, dispositivos
- ‚úÖ **Configuraci√≥n de acceso**: estado cuenta, sesiones

**Componentes UI necesarios:**
- `UserProfile` - Vista principal del perfil
- `UserInfoTabs` - Tabs para diferentes secciones
- `ActivityTimeline` - Timeline de actividad
- `PermissionsMatrix` - Matriz de permisos visual

#### **Editar Usuario (`/admin/users/:id/edit`)**
**Formulario por secciones:**
- ‚úÖ **Informaci√≥n b√°sica**: nombre, email, tel√©fono
- ‚úÖ **Roles y permisos**: checkboxes con descripciones
- ‚úÖ **Configuraci√≥n de acceso**: estado, timeouts, IPs
- ‚úÖ **Notas internas**: comentarios del administrador

### **2. Gesti√≥n de Profesores**

#### **Lista de Profesores (`/admin/professors`)**
**Funcionalidades requeridas:**
- ‚úÖ **Vista de tarjetas** con estad√≠sticas
- ‚úÖ **M√©tricas por profesor**: estudiantes, plantillas, adherencia
- ‚úÖ **Filtros**: estado, especialidad, carga de trabajo
- ‚úÖ **Acciones**: Ver perfil, Ver estudiantes, Editar permisos

#### **Asignar Rol de Profesor (`/admin/professors/assign`)**
**Wizard de asignaci√≥n:**
- ‚úÖ **Selecci√≥n de usuario** con b√∫squeda
- ‚úÖ **Formulario de calificaciones**: educaci√≥n, certificaciones
- ‚úÖ **Configuraci√≥n de permisos**: l√≠mites, especialidades
- ‚úÖ **Revisi√≥n y confirmaci√≥n**

### **3. Configuraci√≥n del Sistema**

#### **Configuraci√≥n General (`/admin/settings`)**
**Secciones de configuraci√≥n:**
- ‚úÖ **API Externa**: URLs, credenciales, timeouts
- ‚úÖ **Sistema de usuarios**: registro, autenticaci√≥n, sesiones
- ‚úÖ **Gimnasio**: l√≠mites, plantillas, notificaciones
- ‚úÖ **Notificaciones**: canales, templates, frecuencia

**Componentes UI necesarios:**
- `SettingsTabs` - Tabs para diferentes secciones
- `SettingsForm` - Formularios por secci√≥n
- `ConfigurationPreview` - Vista previa de cambios
- `SettingsBackup` - Backup/restore de configuraci√≥n

### **4. Reportes y M√©tricas**

#### **Dashboard de Reportes (`/admin/reports`)**
**Reportes disponibles:**
- ‚úÖ **Uso del sistema**: usuarios activos, API calls, errores
- ‚úÖ **Actividad de profesores**: plantillas, asignaciones, adherencia
- ‚úÖ **Sincronizaci√≥n API**: estado, errores, estad√≠sticas
- ‚úÖ **M√©tricas de gimnasio**: uso, popularidad, tendencias

**Componentes UI necesarios:**
- `ReportGrid` - Grid de reportes disponibles
- `ReportCard` - Tarjeta por reporte con preview
- `ChartContainer` - Contenedor para gr√°ficos
- `ReportFilters` - Filtros por per√≠odo/usuario

### **5. Logs de Auditor√≠a**

#### **Visor de Auditor√≠a (`/admin/audit`)**
**Funcionalidades requeridas:**
- ‚úÖ **Tabla de logs** con paginaci√≥n
- ‚úÖ **Filtros avanzados**: usuario, acci√≥n, recurso, fecha
- ‚úÖ **B√∫squeda de texto** en detalles
- ‚úÖ **Exportaci√≥n** de logs filtrados
- ‚úÖ **Vista detallada** de cada entrada

## üé® **Componentes UI Comunes**

### **Componentes Base Requeridos**
- `DataTable` - Tabla con paginaci√≥n, filtros, ordenamiento
- `SearchInput` - Input de b√∫squeda con debounce
- `FilterPanel` - Panel de filtros colapsable
- `ActionDropdown` - Dropdown de acciones por fila
- `BulkActions` - Barra de acciones masivas
- `ConfirmDialog` - Modal de confirmaci√≥n
- `FormWizard` - Wizard de m√∫ltiples pasos
- `LoadingStates` - Skeletons y spinners
- `EmptyStates` - Estados vac√≠os con ilustraciones

### **Componentes Especializados**
- `UserSelector` - Selector de usuarios con b√∫squeda
- `ExerciseSelector` - Selector de ejercicios con filtros
- `WeekCalendar` - Calendario semanal interactivo
- `PermissionMatrix` - Matriz visual de permisos
- `StatCard` - Tarjeta de estad√≠stica
- `ActivityTimeline` - Timeline de actividad
- `ChartWrapper` - Wrapper para gr√°ficos

## üîÑ **Patrones de Implementaci√≥n**

### **1. Patr√≥n de Lista/CRUD**
```
/resource
‚îú‚îÄ‚îÄ index.tsx          # Lista principal
‚îú‚îÄ‚îÄ create.tsx         # Formulario de creaci√≥n
‚îú‚îÄ‚îÄ [id]/
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx      # Vista detallada
‚îÇ   ‚îú‚îÄ‚îÄ edit.tsx       # Formulario de edici√≥n
‚îÇ   ‚îî‚îÄ‚îÄ delete.tsx     # Confirmaci√≥n de eliminaci√≥n
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ ResourceTable.tsx
    ‚îú‚îÄ‚îÄ ResourceForm.tsx
    ‚îú‚îÄ‚îÄ ResourceFilters.tsx
    ‚îî‚îÄ‚îÄ ResourceCard.tsx
```

### **2. Patr√≥n de Wizard**
```
/resource/create
‚îú‚îÄ‚îÄ index.tsx          # Contenedor del wizard
‚îú‚îÄ‚îÄ steps/
‚îÇ   ‚îú‚îÄ‚îÄ Step1.tsx      # Paso 1
‚îÇ   ‚îú‚îÄ‚îÄ Step2.tsx      # Paso 2
‚îÇ   ‚îî‚îÄ‚îÄ Step3.tsx      # Paso 3
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ WizardNav.tsx  # Navegaci√≥n del wizard
‚îÇ   ‚îî‚îÄ‚îÄ StepWrapper.tsx
‚îî‚îÄ‚îÄ hooks/
    ‚îî‚îÄ‚îÄ useWizard.tsx  # L√≥gica del wizard
```

### **3. Patr√≥n de Dashboard**
```
/dashboard
‚îú‚îÄ‚îÄ index.tsx          # Dashboard principal
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ MetricCard.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ChartCard.tsx
‚îÇ   ‚îî‚îÄ‚îÄ RecentActivity.tsx
‚îî‚îÄ‚îÄ hooks/
    ‚îî‚îÄ‚îÄ useDashboard.tsx
```

## üìä **Estados de Datos**

### **Estados Globales (React Query)**
- `useUsers` - Lista de usuarios con filtros
- `useUser` - Usuario individual
- `useExercises` - Cat√°logo de ejercicios
- `useDailyTemplates` - Plantillas diarias
- `useWeeklyTemplates` - Plantillas semanales
- `useAssignments` - Asignaciones semanales
- `useSystemSettings` - Configuraci√≥n del sistema
- `useAuditLogs` - Logs de auditor√≠a

### **Estados Locales (useState/useReducer)**
- Filtros de tablas
- Estado de formularios
- Selecciones m√∫ltiples
- Estado de wizards
- Modales abiertos/cerrados

## üîê **Permisos y Acceso**

### **Control de Acceso por Ruta**
- `/gym/*` - Requiere `is_professor: true`
- `/admin/users/*` - Requiere `is_admin: true`
- `/admin/settings/*` - Requiere `is_super_admin: true`
- `/admin/audit/*` - Requiere `audit_access: true`

### **Control de Acceso por Acci√≥n**
- **Crear**: Verificar permisos de escritura
- **Editar**: Verificar ownership o permisos admin
- **Eliminar**: Verificar permisos de eliminaci√≥n
- **Ver**: Verificar permisos de lectura

## üöÄ **Prioridades de Implementaci√≥n**

### **Fase 1: CRUDs B√°sicos (2-3 semanas)**
1. ‚úÖ CRUD de Ejercicios (completo)
2. ‚úÖ CRUD de Usuarios (b√°sico)
3. ‚úÖ Lista de Plantillas Diarias (solo lectura)
4. ‚úÖ Lista de Asignaciones (solo lectura)

### **Fase 2: Funcionalidades Avanzadas (2-3 semanas)**
1. ‚úÖ Wizard de Plantillas Diarias
2. ‚úÖ Wizard de Asignaciones
3. ‚úÖ Gesti√≥n de Profesores
4. ‚úÖ Configuraci√≥n del Sistema

### **Fase 3: Reportes y Auditor√≠a (1-2 semanas)**
1. ‚úÖ Dashboard de Reportes
2. ‚úÖ Logs de Auditor√≠a
3. ‚úÖ M√©tricas avanzadas
4. ‚úÖ Exportaciones

### **Fase 4: Optimizaci√≥n y UX (1 semana)**
1. ‚úÖ Performance optimization
2. ‚úÖ Responsive design
3. ‚úÖ Accessibility
4. ‚úÖ Testing integral

## üìã **Checklist de Implementaci√≥n**

### **Por cada CRUD implementar:**
- [ ] **Lista**: Tabla/Grid con paginaci√≥n y filtros
- [ ] **Crear**: Formulario con validaci√≥n
- [ ] **Ver**: Vista detallada de solo lectura
- [ ] **Editar**: Formulario pre-poblado
- [ ] **Eliminar**: Confirmaci√≥n y soft delete
- [ ] **B√∫squeda**: Input con debounce
- [ ] **Filtros**: Panel colapsable
- [ ] **Ordenamiento**: Por columnas relevantes
- [ ] **Acciones masivas**: Para operaciones m√∫ltiples
- [ ] **Estados de carga**: Skeletons y spinners
- [ ] **Estados vac√≠os**: Ilustraciones y CTAs
- [ ] **Manejo de errores**: Toast notifications
- [ ] **Responsive design**: Mobile-first
- [ ] **Accessibility**: ARIA labels y navegaci√≥n por teclado

Esta gu√≠a proporciona toda la informaci√≥n necesaria para implementar los CRUDs del panel de administraci√≥n sin incluir c√≥digo espec√≠fico, enfoc√°ndose en funcionalidades, componentes y patrones de implementaci√≥n.
